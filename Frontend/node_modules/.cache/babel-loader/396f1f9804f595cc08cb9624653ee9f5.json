{"ast":null,"code":"import _classCallCheck from\"/Users/lakshyakhetan/development/React/anotherone/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/lakshyakhetan/development/React/anotherone/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/lakshyakhetan/development/React/anotherone/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/lakshyakhetan/development/React/anotherone/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'../App.css';import StockUtils from'../StockManagement/StockUtils';import Cards from'./card';import{Input}from'reactstrap';import Chart from'./chart';import Loading from'./Loader';import StockTable from'../StockManagement/StockTable';import ManageNews from'../NewsManagement/ManageNews';import NewsUtils from'../NewsManagement/sampleNewsUtils';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MarketTrack=/*#__PURE__*/function(_Component){_inherits(MarketTrack,_Component);var _super=_createSuper(MarketTrack);function MarketTrack(props){var _this;_classCallCheck(this,MarketTrack);_this=_super.call(this,props);_this.handleChange=function(event){_this.setState({loading:true});_this.handleClick(true);_this.handleChartTable(true);var symbol=event.target.value;console.log('what',symbol);var i;var k;var index;for(i=0;i<symbol.length;i++){if(symbol[i]==='-'){if(symbol[i+4]===':'){k=i+4;break;}else{index=i;k=i;break;}}}//callback function......\n_this.setState({stock_Name:symbol.substring(i+1),display_name:symbol.substring(0,i),initial_Name:symbol.substring(k+1)},function(){_this.Stocker();_this.getNews();console.log(\"state\",_this.state.stock_Name);});};_this.state={Stock:StockUtils,News:NewsUtils,x_val:[],y_val:[],closed:[],high:[],low:[],wholeLow:[],wholeHigh:[],wholeClose:[],articles:[],presetLow:[],stock_Name:'FB',initial_Name:'FB',loading:true,presentDate:'',stockWhole:[],display_name:'Facebook Inc.'};return _this;}_createClass(MarketTrack,[{key:\"handleClick\",value:function handleClick(val){this.setState({showMore:!val});}},{key:\"handleChartTable\",value:function handleChartTable(val){this.setState({showMoreChart:!val});}},{key:\"componentDidMount\",value:function componentDidMount(){this.Stocker();this.getNews();}},{key:\"Stocker\",value:function Stocker(){var pointerToThis=this;// console.log(pointerToThis);\nvar API_Key='X662IPBO4D3M25MX';var Stock_Symbol=this.state.stock_Name;console.log(Stock_Symbol);//we are using backtick so that we can copy API directly here by putting in it\nvar API_Call=\"https://www.alphavantage.co/query?function=TIME_SERIES_DAILY_ADJUSTED&symbol=\".concat(Stock_Symbol,\"&outputsize=compact&apikey=\").concat(API_Key);var stocksXval=[];var stocksYval=[];var presentDate=[];var wholeHigh=[];var wholeLow=[];var wholeClose=[];fetch(API_Call).then(function(response){return response.json();}).then(function(data){var x=1;console.log(data);// this.setState({loading:true});\nfor(var key in data['Time Series (Daily)']){stocksXval.push(key);stocksYval.push(data['Time Series (Daily)'][key]['1. open']);wholeHigh.push(data['Time Series (Daily)'][key]['2. high']);wholeLow.push(data['Time Series (Daily)'][key]['3. low']);wholeClose.push(data['Time Series (Daily)'][key]['4. close']);if(x>=1){presentDate.push(key);x=x-1;}}console.log('dates are here',stocksXval);pointerToThis.setState({x_val:stocksXval,y_val:stocksYval,presentDate:presentDate,wholeHigh:wholeHigh,wholeLow:wholeLow,wholeClose:wholeClose,loading:false});});}},{key:\"getNews\",value:function getNews(){var _this2=this;var Stock_Name=this.state.initial_Name;console.log('Given News Name::',Stock_Name);var API_Call=\"https://gnews.io/api/v4/search?q=\".concat(Stock_Name,\"&country=us&token=1a09b0dcb1c66a5b7f6e463a0f17aa60\");console.log(\"myAPI\",API_Call);fetch(API_Call).then(function(response){return response.json();}).then(function(data){console.log('response to what',data);_this2.setState({articles:data.articles});}).catch(function(error){if(error){console.log(\"error is coming\");_this2.setState({articles:NewsUtils});}});}},{key:\"render\",value:function render(){console.log(\"Gnews is here\",this.state.articles);var loading=this.state.loading;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"jumbotron jumbotron-fluid bg-dark text-light\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"display-3\",children:\"React Stock Market\"}),/*#__PURE__*/_jsx(\"p\",{className:\"lead\",children:\"A simple stock market API app hello\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col input-group\",children:/*#__PURE__*/_jsxs(Input,{className:\"inputBrand\",type:\"select\",name:\"carbrand\",id:\"carBrand\",onChange:this.handleChange,style:{background_color:'red'},children:[/*#__PURE__*/_jsx(\"option\",{children:\"Please select a stock\"}),StockUtils.map(function(data){return/*#__PURE__*/_jsxs(\"option\",{children:[data.name,\"-\",data.symbol]},data.id);})]})})}),/*#__PURE__*/_jsx(\"br\",{})]})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-7 col-xs-12 col-sm-12 graph_container \",children:loading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsx(Chart,{x_axis:this.state.x_val,y_axis:this.state.y_val,loader:this.state.loading})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-5 col-sm-12 \",children:[/*#__PURE__*/_jsx(\"h2\",{style:{align:'left',color:\"white\",style:'underline'},children:this.state.display_name}),/*#__PURE__*/_jsx(\"hr\",{style:{background:\"grey\"}}),loading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsx(Cards,{open:this.state.y_val,close:this.state.wholeClose,high:this.state.wholeHigh,low:this.state.wholeLow,date:this.state.presentDate}),/*#__PURE__*/_jsx(\"hr\",{style:{background:\"grey\"}})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"container1\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mt-4x\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-7 col-sm-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"font-italic text-white text-uppercase\",style:{fontStyle:'italic',paddingBottom:\"10px\"},children:\"Trends\"}),loading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsx(StockTable,{openVal:this.state.y_val,closeVal:this.state.wholeClose,highVal:this.state.wholeHigh,dateVal:this.state.x_val,lowVal:this.state.wholeLow})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-5 col-sm-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-white text-uppercase \",style:{paddingLeft:\"20px\",fontStyle:'italic',paddingBottom:\"10px\"},children:\"News\"}),loading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsx(ManageNews,{news:this.state.articles})]})})]})]})]})]});}}]);return MarketTrack;}(Component);export default MarketTrack;","map":{"version":3,"sources":["/Users/lakshyakhetan/development/React/anotherone/src/components/marketTrack.js"],"names":["React","Component","StockUtils","Cards","Input","Chart","Loading","StockTable","ManageNews","NewsUtils","MarketTrack","props","handleChange","event","setState","loading","handleClick","handleChartTable","symbol","target","value","console","log","i","k","index","length","stock_Name","substring","display_name","initial_Name","Stocker","getNews","state","Stock","News","x_val","y_val","closed","high","low","wholeLow","wholeHigh","wholeClose","articles","presetLow","presentDate","stockWhole","val","showMore","showMoreChart","pointerToThis","API_Key","Stock_Symbol","API_Call","stocksXval","stocksYval","fetch","then","response","json","data","x","key","push","Stock_Name","catch","error","background_color","map","name","id","align","color","style","background","fontStyle","paddingBottom","paddingLeft"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport '../App.css';\nimport StockUtils from '../StockManagement/StockUtils';\nimport Cards from './card';\nimport {Input} from 'reactstrap';\nimport Chart from './chart';\nimport Loading from './Loader';\nimport StockTable from '../StockManagement/StockTable';\nimport ManageNews from '../NewsManagement/ManageNews';\nimport NewsUtils from '../NewsManagement/sampleNewsUtils';\n\n\nclass MarketTrack extends Component {\n    constructor(props) {\n        super(props);\n        this.state={\n            Stock:StockUtils,\n            News:NewsUtils,\n            x_val:[],\n            y_val:[],\n            closed:[],\n            high:[],\n            low:[],\n            wholeLow:[],\n            wholeHigh:[],\n            wholeClose:[],\n            articles:[],                                                                \n            presetLow:[],\n            stock_Name:'FB',\n            initial_Name:'FB',\n            loading:true,\n            presentDate:'',\n            stockWhole:[],\n            display_name:'Facebook Inc.'\n            \n        }\n\n    }\n    handleClick(val) {\n        this.setState({showMore: !val})\n    }\n    handleChartTable(val){\n        this.setState({showMoreChart: !val})\n    }\n\n\n    handleChange = (event) => {\n        this.setState({loading:true})\n        this.handleClick(true);\n        this.handleChartTable(true);\n        var symbol=event.target.value;\n        console.log('what',symbol);\n        var i;\n        var k;\n        var index;\n        for(i=0;i<symbol.length;i++){\n            if(symbol[i]==='-'){\n                if(symbol[i+4]===':'){\n                    k=i+4;\n                    break;\n                }\n                else{\n                    index=i;\n                    k=i\n                    break;\n                }\n                \n            }\n        }\n        //callback function......\n        this.setState({\n            stock_Name: symbol.substring(i+1),\n            display_name:symbol.substring(0,i),\n            initial_Name: symbol.substring(k+1)\n        }, () => {\n            this.Stocker()\n            this.getNews()\n            console.log(\"state\",this.state.stock_Name);\n        })\n    };\n\n    componentDidMount(){\n        this.Stocker();\n        this.getNews();\n\n\n    }\n\n    Stocker(){\n        const pointerToThis =this;\n        // console.log(pointerToThis);\n        const API_Key='X662IPBO4D3M25MX';\n        const Stock_Symbol=this.state.stock_Name;\n        console.log(Stock_Symbol);\n        //we are using backtick so that we can copy API directly here by putting in it\n        let API_Call=`https://www.alphavantage.co/query?function=TIME_SERIES_DAILY_ADJUSTED&symbol=${Stock_Symbol}&outputsize=compact&apikey=${API_Key}`;\n        let stocksXval=[];\n        let stocksYval=[];\n        let presentDate=[];\n        let wholeHigh=[];\n        let wholeLow=[];\n        let wholeClose=[];\n\n        fetch(API_Call)\n            .then(\n                function(\n                    response){\n                        return response.json();\n                })\n            .then(\n                function(data){\n                    var x=1;\n                    console.log(data);\n                    // this.setState({loading:true});\n                    for (var key in data['Time Series (Daily)']){\n                        stocksXval.push(key);\n                        stocksYval.push(\n                            data['Time Series (Daily)'][key]['1. open']\n                            );\n                            wholeHigh.push(\n                                data['Time Series (Daily)'][key]['2. high']\n                                );\n                                wholeLow.push(\n                                    data['Time Series (Daily)'][key]['3. low']\n                                    );\n                                    wholeClose.push(\n                                        data['Time Series (Daily)'][key]['4. close']\n                                        );\n\n                            if(x>=1){\n                                presentDate.push(key)\n                                    x=x-1\n                            }\n                    }\n\n\n                    console.log('dates are here',stocksXval);\n                    pointerToThis.setState({\n                        x_val:stocksXval,\n                        y_val:stocksYval,\n                        presentDate:presentDate,\n                        wholeHigh:wholeHigh,\n                        wholeLow:wholeLow,\n                        wholeClose:wholeClose,\n                        loading:false,\n                    })\n                }\n            )\n    }\n\n    getNews(){\n        const Stock_Name=this.state.initial_Name;\n        console.log('Given News Name::',Stock_Name);\n        let API_Call=`https://gnews.io/api/v4/search?q=${Stock_Name}&country=us&token=1a09b0dcb1c66a5b7f6e463a0f17aa60`;\n        console.log(\"myAPI\",API_Call)\n\n        fetch(API_Call)\n        .then(\n                    (\n                        response)=>{\n                            return response.json();\n                    })\n                .then((data)=>{\n                    console.log('response to what',data);\n                    this.setState({\n                        articles: data.articles\n                    })\n    \n                })\n                .catch((error)=>{\n                    if(error){\n                        console.log(\"error is coming\")\n                        this.setState({\n                            articles:NewsUtils\n                        })\n                    }\n                }\n                )\n    \n    }\n    \n\n    render() {\n            console.log(\"Gnews is here\",this.state.articles)\n        const{loading} =this.state\n        \n        return (\n\n            <div>\n\n            {/* creating a jumbotron for searching stock */}\n                <div className=\"jumbotron jumbotron-fluid bg-dark text-light\">\n                    <div className=\"container\">\n                        <h2 className=\"display-3\">React Stock Market</h2>\n                            <p className=\"lead\">A simple stock market API app hello</p>\n                                <div className=\"row\">\n                                    <div className=\"col input-group\">\n                                        <Input className=\"inputBrand\" type=\"select\" name=\"carbrand\" id=\"carBrand\" onChange={this.handleChange} style={{background_color:'red'}} >\n                                            <option>Please select a stock</option>\n                                            {StockUtils.map((data) => {\n                                            return <option key={data.id}>{data.name}-{data.symbol}</option>\n                                            })}\n                                        </Input>\n                                    </div>\n                                </div>\n                                <br />\n                    </div>\n                </div>\n\n                \n                <br />\n                <div className=\"container\" >\n                    <div className=\"row \">\n                        <div className=\"col-md-7 col-xs-12 col-sm-12 graph_container \" >\n                            {loading ?<Loading /> :<Chart x_axis={this.state.x_val} y_axis={this.state.y_val} loader={this.state.loading}  />}\n                        </div>\n\n                    <div className=\"col-md-5 col-sm-12 \">\n                        <h2 style={{align: 'left' ,color:\"white\",style:'underline'}}>{this.state.display_name}</h2>\n\n                                            <hr  style={{background: \"grey\",}} />\n                                            {loading ?<Loading /> :<Cards  open={this.state.y_val} close={this.state.wholeClose} high={this.state.wholeHigh} low={this.state.wholeLow} date={this.state.presentDate} />}\n                                            <hr style={{background: \"grey\"}}></hr>\n                    </div>\n                </div>\n\n                <div className=\"container1\">\n                <br/>\n                \n                <div className=\"row mt-4x\">\n                    <div className=\"col-md-7 col-sm-12\">\n                        <div className=\"container\">\n                        <div className=\"col-md-2\"></div>\n                        \n                            <h2 className=\"font-italic text-white text-uppercase\" style={{fontStyle:'italic',paddingBottom:\"10px\"}}>Trends</h2>\n                            {loading?<Loading />:<StockTable openVal={this.state.y_val} closeVal={this.state.wholeClose} highVal={this.state.wholeHigh} dateVal={this.state.x_val} lowVal={this.state.wholeLow}/>}\n                        </div>\n                    </div>\n                    <div className=\"col-md-5 col-sm-12\">\n                            <div className=\"container-fluid\">\n                            <h2 className=\"text-white text-uppercase \" style={{paddingLeft:\"20px\",fontStyle:'italic',paddingBottom:\"10px\"}}>News</h2>\n                        {loading ?<Loading />:<ManageNews news={this.state.articles}/>}\n                        </div>\n                    </div>\n                    \n\n                </div>\n                            </div>\n                            \n                            </div>\n\n                \n                    </div>\n\n            \n);\n        }\n}\nexport default MarketTrack;\n"]},"metadata":{},"sourceType":"module"}